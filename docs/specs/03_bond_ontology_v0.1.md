# Bond Ontology v0.1

## 1) Front Matter

* **Title:** Bond Ontology v0.1
* **Version:** v0.1
* **Date:** 2025-12-16
* **Status:** Draft
* **Suggested repo path:** `/docs/specs/03_bond_ontology_v0.1.md`

## 2) Purpose

Bond ontology exists to keep Field-Kit’s “Bond” concept **stable, buildable, and non-chat-shaped**:

* It constrains **what a Bond is in data and behavior**: a single object that is both **prompt + connector**, with a strict lifecycle (draft → executed) and auditable lineage (inputs → bond → output).
* It constrains **how Bonds are created**: user confirmation is required (including when the system suggests prompts).
* It constrains **how execution is logged**: execution must produce an output Item and append QDPIEvents (append-only).

Bond ontology does **not** constrain what users can write. Users can write any `prompt_text`, execute without any explicit type/label, and create “link-only” Bonds for structure.

### Terms (v0.1)

* **Episode:** A local, user-owned container for one working session. Every persisted object and every QDPIEvent belongs to exactly one Episode via `episode_id`.
* **Item:** A persistent node of content in the Field, created by a user or generated by an operator. Items are addressable by ID and include a `type` (e.g., `Q`, `M`, `D`, `H`) plus content and minimal metadata.
* **Bond:** A persistent instruction that connects one or more input Items to an operator run. `prompt_text` is the primary instruction. Bonds are created as `status:"draft"` and may be executed; execution generates exactly one output Item and MUST set `status:"executed"` and `output_item_id`.
* **QDPIEvent:** An append-only event record that logs meaningful actions and results. Each event includes `qdpi` (Queue/Monologue/Dialogue/Holologue), `direction` (user→field or system→field), a `name`, a timestamp, and refs to related object IDs.
* **Proposal:** A system suggestion (e.g., suggested Bond prompts) that is logged as events only until the user explicitly confirms creation.
* **Canon:** A user-curated projection over Items/Bonds within an Episode used for presentation or replay. Canon never overrides the append-only event log.
* **Bundle:** A structured artifact output of a Holologue run (many→one) capturing what was selected, what was generated, and any optional proposals. A Bundle may be represented as a single output Item plus an exportable JSON payload.

## 3) Scope and Non-goals (v0.1)

* v0.1 is **Private • Local**: no accounts, no cloud sync, no collaboration, no publishing.
* Bond Ontology keeps “Bond” stable and non-chat-shaped; it does **not** introduce payments, crypto/blockchain, exchange, cash-out, or any monetary system.

## 4) Core Concepts & Terms

**Item**
A persistent node of content in the Field (see **Terms (v0.1)**). Items are user-created and can also be generated as outputs of Bond execution (type `M` or `D`) and Holologue runs (type `H`).

**Bond (prompt + connector)**
A persistent instruction connecting one or more input Items via `input_item_ids` and storing a user-facing prompt in `prompt_text` (see **Terms (v0.1)**). A Bond may be executed to generate exactly one output Item, but can also exist purely as structure.

> **Critical rule:** The Bond is the prompt. The user-facing thing is `prompt_text`.

**Bond Draft**
A Bond with `status: "draft"` and `output_item_id: null`. Draft Bonds are editable (prompt and inputs) until first execution.

**Bond Executed**
A Bond with `status: "executed"` and a non-null `output_item_id`. Executed Bonds are immutable in their `prompt_text` and `input_item_ids` (re-exec only updates output linkage and execution metadata).

**Proposal (suggested prompt, not yet a Bond)**
A candidate `prompt_text` suggested by the system from Item content (or Holologue context). Proposals are **not** persistent Bonds unless the user confirms creation. In v0.1, proposals SHOULD be recorded as **QDPIEvents** (recommended) rather than materialized into persistent Bonds.

**Lineage (inputs → bond → output)**
The minimal provenance chain:

* input Items (`input_item_ids`)
* a Bond (`bd_…`) with `prompt_text`
* a generated output Item (`it_…`) with provenance pointing back to the Bond

**Holologue (many→one artifact operator)**
A Field operation (not a Bond) that takes a constellation of multiple Items (and may optionally consider nearby Bonds) and produces **one specific artifact Item** (`type: "H"`). Holologue may propose Bond prompts (Proposals), but must not silently create Bonds.

## 5) Bond Forms (by arity / operator shape)

### A) Unary / Generative Bond

* **Inputs:** 1+ Items (`input_item_ids.length >= 1`)
* **Primary user-facing content:** `prompt_text`
* **Execution:** creates **one new output Item** (usually `type: "M"` or `type: "D"`)
* **Primary use in v0.1:** the Guided Tutorial’s Q→M (suggested prompt) and Q→D (user-written prompt)

### B) Binary / Interpretive Bond

* **Inputs:** exactly 2 Items (`input_item_ids.length == 2`)
* **Modes:**

  * **Link-only (v0.1 required):** structure without generation; Bond remains `status: "draft"` with `output_item_id: null`
    For link-only Bonds (not executed), `prompt_text` functions as a readable relationship statement / connective prompt (the “why this link exists”), even if no output Item is generated.
  * **Link+generate (future):** optional extension where execution generates an output Item
* **Primary use in v0.1:** represent interpretive relationships that Holologue can consume as topology (without forcing generation)

### C) Constellation / Holologue Operator

* **Inputs:** 2+ Items selected by the user (and the system may optionally consider nearby executed Bonds for context)
* **Output:** **ONE specific artifact Item** (`type: "H"`)
* **May propose Bonds:** Holologue may propose 4 Bond prompts as suggestions (events only); proposals are not Bonds until user confirms.

## 6) Bond Lifecycle & Invariants (v0.1)

This section must match “Core Data Objects v0.1”.

### Lifecycle

1. **Proposal (optional, pre-object)**
   System suggests prompts as **events only** (recommended), not as Bonds.

2. **Draft created (user-confirmed)**
   User confirms creation of a Bond with:

   * `input_item_ids`
   * `prompt_text`
   * `status: "draft"`
   * `output_item_id: null`

3. **Executed (optional)**
   When user taps **Run Bond**:

   * append `bond.run_requested` (QDPI `Q`, `direction:"user→field"`)
   * execute using `prompt_text` over the resolved input Items
   * create exactly one output Item (type `M` or `D`)
   * update Bond to `status: "executed"`, set `output_item_id`, set execution metadata
   * append `bond.executed` (QDPI `M`, `direction:"system→field"`) and `store.commit` (QDPI `Q`, `direction:"system→field"`)

4. **Failure**
   v0.1 failure representation is **draft + last_error**:

   * Bond remains `status: "draft"`
   * set/update `last_error`
   * append `bond.execution_failed` (QDPI `M`, `direction:"system→field"`) and do not create an output Item

### Invariants

* **User confirmation required:** a Bond object is created only after explicit user action (“Create Bond”).
* **Draft invariant:** `status:"draft"` ⇒ `output_item_id === null`
* **Executed invariant:** `status:"executed"` ⇒ `output_item_id !== null`
* **Immutability after execution:** once executed, `prompt_text` and `input_item_ids` do not change.
* **Re-execution (if supported):** may update `output_item_id`, `executed_at`, and `execution_count` only. If `output_item_id` changes, prior output Items remain in the store with their provenance (history is not deleted).
* **Lineage required:** output Items created by Bonds must include provenance `{ created_by:"bond", bond_id, input_item_ids }`.
* **Type not required:** a Bond can be executed with `intent_type` unset/null; system may infer or ignore labels.

## 7) Credits hooks (v0.1 simulation)

Credits hooks attach to Bond-related actions without changing what a Bond is.

### What Credits are (and are not) in v0.1

* Credits are **local-only** and **purely simulated** in v0.1.
* Credits are **not transferable**, **not redeemable**, and have **no USD exchange rate** in v0.1.
* Credits are represented as **append-only QDPIEvents** and balance is a **derived view** (no new required core object).

### Standard event pattern (single pattern in v0.1)

* **Event name:** `credits.delta`
* **Event fields:** `qdpi: "Q"`, `direction: "system→field"`
* `refs` MUST include:

  * `delta` (integer; + or -)
  * `balance_after` (integer)
  * `reason` (string; e.g., `seed`, `bond_draft_created`, `bond_run_spend`, `bond_executed_reward`, `bond_run_refund`)
  * optional related refs: `bond_id`, `item_id`, `event_id`

### Minimal default credit policy for Bond actions (v0.1 defaults)

These are **defaults** for v0.1 and may be tuned later, but are treated as stable within v0.1.

* Draft created (`bond.draft_created`) → **+1** credit (`reason:"bond_draft_created"`)
* Run requested (`bond.run_requested`) → **-10** credits (`reason:"bond_run_spend"`)
* Execution failed (`bond.execution_failed`) → **+10** credits refund (`reason:"bond_run_refund"`) so failure doesn’t burn credits
* Execution succeeded (`bond.executed`) → **+3** credits reward (`reason:"bond_executed_reward"`)

## 8) Bond Grammar (optional system-facing metadata; not required)

Bond grammar is a small, stable set of inferred labels the system **may** use to interpret Bonds for:

* Holologue reasoning (topology + intent hints)
* filtering and grouping
* ensuring suggestion diversity (avoid 4 near-duplicates)

**Important constraints**

* Labels are **not** the primary UI.
* Users never have to choose labels.
* Execution does not require labels (labels may be null).
* If stored, labels live in `Bond.intent_type` and should be one of the 12 below.
* `intent_type` is OPTIONAL on persisted Bonds; it may be stored when a Bond is created from a suggestion, but may also be omitted even if inferred. Execution must never depend on `intent_type`; labels exist primarily for system interpretation (Holologue reasoning, filtering, suggestion diversity) and may be hidden in the UI by default.

### The 12 inferred labels (exact set for v0.1)

#### 1) `expands`

* **Meaning:** Expand an Item into more detail, structure, or next steps.
* **prompt_text signal:** verbs like “expand”, “outline”, “break into steps”, “turn into a plan”.
* **Topology signal:** unary generative Bond from a single Item into a longer output Item.
* **Example content-shaped prompt_text:** “Expand ‘Reduce onboarding friction’ into a 6-step checklist with success criteria.”
* **Anti-pattern:** using `expands` as a generic “tell me more” with no concrete constraints.

#### 2) `answers`

* **Meaning:** Attempt to directly answer a question Item with a concrete response.
* **prompt_text signal:** “answer”, “give the best answer”, “decide”, “recommend”.
* **Topology signal:** unary Bond from an Item of type `Q` to an output Item (often `M`) that reads like an answer.
* **Example prompt_text:** “Answer: Should the tutorial be optional? Give a decision + 3 reasons.”
* **Anti-pattern:** using `answers` to generate vague brainstorming instead of a committed answer.

#### 3) `clarifies`

* **Meaning:** Reduce ambiguity by defining terms, assumptions, and constraints.
* **prompt_text signal:** “clarify”, “define”, “make explicit”, “rewrite as a precise claim”.
* **Topology signal:** unary Bond from a fuzzy Q into a more precise M/D output.
* **Example prompt_text:** “Clarify ‘not chat’: define 3 measurable criteria and the edge cases.”
* **Anti-pattern:** treating `clarifies` as a summary; clarity implies specificity, not compression.

#### 4) `derives_from`

* **Meaning:** Mark that one Item (often an output) is derived from another.
* **prompt_text signal:** “derive”, “based on”, “from this, produce”.
* **Topology signal:** Bonds where inputs include a prior artifact and output is a transformed version; common in re-exec chains.
* **Example prompt_text:** “Derive a minimal schema from this spec: list required fields only.”
* **Anti-pattern:** using `derives_from` to assert causal truth instead of provenance (“derived” is about lineage, not correctness).

#### 5) `revises`

* **Meaning:** Rewrite an existing idea under new constraints or feedback.
* **prompt_text signal:** “revise”, “update”, “rewrite with constraints”, “fix”.
* **Topology signal:** inputs often include a previous output Item; output is a revised artifact.
* **Example prompt_text:** “Revise this Bond prompt to avoid generic language and include the Item’s key nouns.”
* **Anti-pattern:** overwriting meaning silently; revisions should preserve history via new outputs, not mutation of executed Bonds.

#### 6) `contradicts`

* **Meaning:** Represent a conflict or explicit disagreement between two Items.
* **prompt_text signal:** “contradict”, “conflicts with”, “cannot both be true”.
* **Topology signal:** binary interpretive link-only Bonds connecting two Items that compete or disagree.
* **Example prompt_text:** “These two claims conflict—record the contradiction and the assumption that would resolve it.”
* **Anti-pattern:** using `contradicts` as a “debate” generator rather than an explicit conflict marker.

#### 7) `qualifies`

* **Meaning:** Add conditions, limits, or caveats to another Item.
* **prompt_text signal:** “qualify”, “under what conditions”, “limit”, “only if”.
* **Topology signal:** binary link-only Bonds where one Item constrains another.
* **Example prompt_text:** “Qualify ‘log everything’: specify what must be debug-only vs production events.”
* **Anti-pattern:** turning `qualifies` into indecision; qualifying should still yield actionable boundaries.

#### 8) `bridges`

* **Meaning:** Connect two Items by identifying a mediating concept or mapping.
* **prompt_text signal:** “bridge”, “map”, “translate between”, “connect”.
* **Topology signal:** binary link-only Bonds used to connect distant clusters; often followed by Holologue usage.
* **Example prompt_text:** “Bridge ‘Bond prompts’ and ‘operator loop’: define how prompt selection becomes lineage.”
* **Anti-pattern:** creating vague “everything relates” links without a specific bridge concept.

#### 9) `grounds_in`

* **Meaning:** Ground an abstract Item in concrete evidence, measurement, or a test.
* **prompt_text signal:** “measure”, “test”, “experiment”, “instrument”, “A/B test”.
* **Topology signal:** unary Bond from an abstract Q into a concrete M output with steps/metrics.
* **Example prompt_text:** “Ground this in an A/B test: define metric, variant, sample size heuristic, and stop rule.”
* **Anti-pattern:** writing “run an experiment” without specifying what would be measured.

#### 10) `exemplifies`

* **Meaning:** Produce examples, instances, or counterexamples.
* **prompt_text signal:** “give examples”, “provide 3 instances”, “counterexample”.
* **Topology signal:** unary Bond generating an output Item that enumerates examples.
* **Example prompt_text:** “Give 3 example Bond prompts shaped by this Item’s content, not generic prompts.”
* **Anti-pattern:** examples unrelated to the input content (template spam).

#### 11) `compares`

* **Meaning:** Compare two Items across explicit criteria.
* **prompt_text signal:** “compare”, “tradeoffs”, “pros/cons”, “differences”.
* **Topology signal:** binary interpretive Bond between two Items; may remain link-only in v0.1.
* **Example prompt_text:** “Compare ‘log everything’ vs ‘log meaning’: list 5 criteria and a recommendation.”
* **Anti-pattern:** comparing without criteria (just vibes).

#### 12) `forks`

* **Meaning:** Explore alternate paths or variants branching from a single Item.
* **prompt_text signal:** “fork”, “generate 3 alternatives”, “different approaches”.
* **Topology signal:** one input leading to multiple potential outputs over time (multiple executed bonds from same input).
* **Example prompt_text:** “Fork this onboarding step into 3 alternative flows optimized for speed vs clarity vs depth.”
* **Anti-pattern:** using `forks` to generate endless options with no selection or constraints.

## 9) Bond Prompt Suggestion Rules (v0.1)

This is the key UX: system proposes 4 candidate bond prompts from Item content.

### When suggestions appear

* On **Item creation** (after save), or
* On **Item selection** (tap an Item), or
* On explicit user action (“Suggest Bonds”)

Suggestions are optional. User can dismiss them.

### What a suggestion is

A suggestion is a candidate Bond prompt (a string) shaped by Item content. It may also carry an optional internal grammar label (one of the 12) for diversity and downstream reasoning.

### Hard requirements for the 4 prompts

* **Content-shaped:** each prompt must include at least one noun/phrase from the Item’s `title` (and ideally a phrase from the `body` if present).
* **Actionable:** prompts should request a concrete output with constraints (format, length, criteria, or success metrics).
* **Diverse:** the 4 prompts should not be near-duplicates; use internal labels to ensure variety.
* **Safe:** do not invent private data; do not encourage sensitive data extraction.

### User choices

* **Select one** → creates a Bond draft (user-confirmed)
* **Edit a suggestion** → becomes user-written; still creates a Bond draft (user-confirmed)
* **Dismiss all** → no Bond created; may still log that suggestions were presented

### How suggestions are stored (v0.1 decision)

**Store suggestions as QDPIEvents only.**

* **Event name:** `bond.suggestions.presented`
* **QDPI tag:** `Q` (orientation/presentation; applies equally to `bond.proposals.presented`)
* **Direction:** `system→field`
* **Why:** avoids polluting the persistent object graph with unconfirmed structures, while still giving an audit/analytics trail and supporting reproducible onboarding flows.

Suggestions are not persisted as Bond objects until the user confirms creation.

## 10) Relationship to Guided Tutorial flows

Bond ontology directly supports the three tutorial moves:

### Q→M (suggested Bond execution)

* System emits `bond.suggestions.presented` (QDPI `Q`, `direction:"system→field"`) with 4 prompts (internal labels optional).
* User selects one (and optionally leaves it unedited).
* User confirms Bond draft (`bond.draft_created`, QDPI `D`, `direction:"user→field"`).
* User taps **Run Bond** (`bond.run_requested`, QDPI `Q`, `direction:"user→field"`).
* System executes and generates output Item `type:"M"`; updates Bond to executed; appends `bond.executed` (QDPI `M`, `direction:"system→field"`).

### Q→D (user-written Bond execution)

* User writes prompt text directly (no label required).
* User confirms Bond draft (`bond.draft_created`, QDPI `D`, `direction:"user→field"`).
* Run Bond (`bond.run_requested`, QDPI `Q`, `direction:"user→field"`).
* System generates output Item `type:"D"` and logs execution (`bond.executed`, QDPI `M`, `direction:"system→field"`).

### (Q,Q)→H (Holologue)

* User selects 2+ Items and runs Holologue (`holologue.run_requested`, QDPI `H`, `direction:"user→field"`).
* System produces one artifact Item `type:"H"` (general→specific) and logs `holologue.completed` (QDPI `H`, `direction:"system→field"`).
* Holologue may propose 4 Bond prompts as suggestions (events only), but does not create Bonds unless the user confirms.

**Clarification:** Bond grammar labels are optional and mostly hidden; they may appear as subtle chips in a details panel but are never required to execute.

## 11) Worked Examples (at least 6)

> Notes:
>
> * IDs are illustrative ULID-like strings, reused consistently across examples.
> * All examples use the same `network_id` and `episode_id` to keep object references coherent.
> * QDPIEvent uses `direction` (not `flow`) and normative values are `user→field` and `system→field`.
> * If `field→user` is ever used (e.g., UI/render), it is **debug-only** and must be marked `is_debug: true` (not shown in normative v0.1 examples).
> * `seq` values are monotonic per `episode_id`; shown here as increasing across examples for clarity.

### Example ID pool (reused)

* `network_id`: `nw_01JFBND01NET00000000000001`
* `episode_id`: `ep_01JFBND01EP000000000000001`

Items:

* `it_01JFBND01QITEM0000000000001` (Q) onboarding friction
* `it_01JFBND01OUTM00000000000001` (M) A/B test plan output
* `it_01JFBND02QITEM0000000000001` (Q) README emphasis
* `it_01JFBND02OUTD00000000000001` (D) README draft output
* `it_01JFBND03A00000000000000001` (Q) “not chat” proof
* `it_01JFBND03B00000000000000001` (Q) Ledger first view
* `it_01JFBND04A00000000000000001` (Q) log every UI render?
* `it_01JFBND04B00000000000000001` (M) event logging rule
* `it_01JFBND05A00000000000000001` (Q) suggestion quality bar
* `it_01JFBND05B00000000000000001` (Q) lifecycle invariants
* `it_01JFBND05OUTH00000000000001` (H) spec fragment artifact
* `it_01JFBND06A00000000000000001` (Q) labels stay hidden
* `it_01JFBND06B00000000000000001` (Q) labels help system
* `it_01JFBND06OUTH00000000000001` (H) plan artifact
* `it_01JFBND06OUTM00000000000001` (M) implementation checklist output

Bonds:

* `bd_01JFBND01BOND00000000000001` (example 1)
* `bd_01JFBND02BOND00000000000001` (example 2)
* `bd_01JFBND03BOND00000000000001` (example 3)
* `bd_01JFBND04BOND00000000000001` (example 4)
* `bd_01JFBND06BOND00000000000001` (example 6)

Events:

* Example 1: `ev_01JFBND01EV000000000000001` .. `ev_01JFBND01EV000000000000006`
* Example 2: `ev_01JFBND02EV000000000000001` .. `ev_01JFBND02EV000000000000003`
* Example 3: `ev_01JFBND03EV000000000000001`
* Example 4: `ev_01JFBND04EV000000000000001`
* Example 5: `ev_01JFBND05EV000000000000001` .. `ev_01JFBND05EV000000000000002`
* Example 6: `ev_01JFBND06EV000000000000001` .. `ev_01JFBND06EV000000000000006`

---

### Example 1 — Unary/Generative (Q→M) via suggested prompt (executed)

**Input Item (Q)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND01QITEM0000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "Q",
  "title": "Reduce onboarding friction without losing rigor",
  "body": "I want first-run to feel fast, but also prove persistence and lineage.",
  "position": { "x": 0, "y": 0, "z": 0 },
  "provenance": { "created_by": "user" },
  "created_at": "2025-12-16T00:00:10.000Z",
  "updated_at": "2025-12-16T00:00:10.000Z"
}
```

**QDPIEvent — system presents 4 suggestions (Proposals; not Bonds)**

```json
{
  "schema_version": 1,
  "id": "ev_01JFBND01EV000000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "ts": "2025-12-16T00:00:11.000Z",
  "seq": 1,
  "qdpi": "Q",
  "direction": "system→field",
  "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
  "name": "bond.suggestions.presented",
  "refs": {
    "source_item_ids": ["it_01JFBND01QITEM0000000000001"],
    "suggestions": [
      { "prompt_text": "Clarify this into 3 measurable onboarding success criteria (speed, proof, comprehension).", "intent_type": "clarifies" },
      { "prompt_text": "Ground this in an A/B test plan: metric, variant, sample-size heuristic, stop rule.", "intent_type": "grounds_in" },
      { "prompt_text": "Expand this into a 6-step first-run checklist with a pass/fail definition of done.", "intent_type": "expands" },
      { "prompt_text": "Fork 3 alternative first-run flows optimized for speed vs clarity vs depth.", "intent_type": "forks" }
    ]
  }
}
```

**Bond (draft) — user selects the A/B test suggestion**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND01BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": ["it_01JFBND01QITEM0000000000001"],
  "prompt_text": "Ground this in an A/B test plan: metric, variant, sample-size heuristic, stop rule.",
  "intent_type": "grounds_in",
  "status": "draft",
  "output_item_id": null,
  "created_by": "user",
  "created_at": "2025-12-16T00:00:12.000Z",
  "updated_at": "2025-12-16T00:00:12.000Z"
}
```

**QDPIEvents — draft created, run requested, executed**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND01EV000000000000002",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:00:12.050Z",
    "seq": 2,
    "qdpi": "D",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.draft_created",
    "refs": {
      "bond_id": "bd_01JFBND01BOND00000000000001",
      "input_item_ids": ["it_01JFBND01QITEM0000000000001"],
      "prompt_text": "Ground this in an A/B test plan: metric, variant, sample-size heuristic, stop rule.",
      "origin": "suggested"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND01EV000000000000003",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:00:13.000Z",
    "seq": 3,
    "qdpi": "Q",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.run_requested",
    "refs": {
      "bond_id": "bd_01JFBND01BOND00000000000001",
      "requested_output_type": "M"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND01EV000000000000004",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:00:14.000Z",
    "seq": 5,
    "qdpi": "M",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "bond.executed",
    "refs": {
      "bond_id": "bd_01JFBND01BOND00000000000001",
      "input_item_ids": ["it_01JFBND01QITEM0000000000001"],
      "output_item_id": "it_01JFBND01OUTM00000000000001",
      "output_item_type": "M",
      "execution_count": 1
    }
  }
]
```

**Credits bookkeeping events (simulation; derived from actions)**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND01EV000000000000005",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:00:13.010Z",
    "seq": 4,
    "qdpi": "Q",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "credits.delta",
    "refs": {
      "delta": -10,
      "balance_after": 90,
      "reason": "bond_run_spend",
      "bond_id": "bd_01JFBND01BOND00000000000001",
      "event_id": "ev_01JFBND01EV000000000000003"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND01EV000000000000006",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:00:14.010Z",
    "seq": 6,
    "qdpi": "Q",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "credits.delta",
    "refs": {
      "delta": 3,
      "balance_after": 93,
      "reason": "bond_executed_reward",
      "bond_id": "bd_01JFBND01BOND00000000000001",
      "item_id": "it_01JFBND01OUTM00000000000001",
      "event_id": "ev_01JFBND01EV000000000000004"
    }
  }
]
```

**Bond (executed) — output linkage set**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND01BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": ["it_01JFBND01QITEM0000000000001"],
  "prompt_text": "Ground this in an A/B test plan: metric, variant, sample-size heuristic, stop rule.",
  "intent_type": "grounds_in",
  "status": "executed",
  "output_item_id": "it_01JFBND01OUTM00000000000001",
  "executed_at": "2025-12-16T00:00:14.000Z",
  "execution_count": 1,
  "created_by": "user",
  "created_at": "2025-12-16T00:00:12.000Z",
  "updated_at": "2025-12-16T00:00:14.000Z"
}
```

**Output Item (M)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND01OUTM00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "M",
  "title": "A/B test plan for first-run",
  "body": "Metric: tutorial completion + ledger-open within 60s.\nVariant A: tutorial prompt after first Item.\nVariant B: tutorial prompt immediately.\nSample-size heuristic: 50 sessions per variant.\nStop rule: 2-day window or 100 sessions total.",
  "position": { "x": 1.2, "y": 0.1, "z": 0 },
  "provenance": {
    "created_by": "bond",
    "bond_id": "bd_01JFBND01BOND00000000000001",
    "input_item_ids": ["it_01JFBND01QITEM0000000000001"]
  },
  "created_at": "2025-12-16T00:00:14.000Z",
  "updated_at": "2025-12-16T00:00:14.000Z"
}
```

---

### Example 2 — Unary/Generative (Q→D) via user-written prompt (executed)

**Input Item (Q)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND02QITEM0000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "Q",
  "title": "What should the README emphasize?",
  "body": "Field-Kit is persistent objects + append-only events + operator loop.",
  "position": { "x": 0, "y": -0.8, "z": 0 },
  "provenance": { "created_by": "user" },
  "created_at": "2025-12-16T00:01:00.000Z",
  "updated_at": "2025-12-16T00:01:00.000Z"
}
```

**Bond (draft) — user-written**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND02BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": ["it_01JFBND02QITEM0000000000001"],
  "prompt_text": "Write a two-paragraph README intro + 5 bullet features. No hype. Mention persistence, lineage, and the Ledger.",
  "status": "draft",
  "output_item_id": null,
  "created_by": "user",
  "created_at": "2025-12-16T00:01:05.000Z",
  "updated_at": "2025-12-16T00:01:05.000Z"
}
```

**QDPIEvents — draft created, run requested, executed**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND02EV000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:01:05.050Z",
    "seq": 7,
    "qdpi": "D",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.draft_created",
    "refs": {
      "bond_id": "bd_01JFBND02BOND00000000000001",
      "input_item_ids": ["it_01JFBND02QITEM0000000000001"],
      "prompt_text": "Write a two-paragraph README intro + 5 bullet features. No hype. Mention persistence, lineage, and the Ledger.",
      "origin": "user_written"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND02EV000000000000002",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:01:06.000Z",
    "seq": 8,
    "qdpi": "Q",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.run_requested",
    "refs": {
      "bond_id": "bd_01JFBND02BOND00000000000001",
      "requested_output_type": "D"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND02EV000000000000003",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:01:07.000Z",
    "seq": 9,
    "qdpi": "M",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "bond.executed",
    "refs": {
      "bond_id": "bd_01JFBND02BOND00000000000001",
      "input_item_ids": ["it_01JFBND02QITEM0000000000001"],
      "output_item_id": "it_01JFBND02OUTD00000000000001",
      "output_item_type": "D",
      "execution_count": 1
    }
  }
]
```

**Bond (executed)**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND02BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": ["it_01JFBND02QITEM0000000000001"],
  "prompt_text": "Write a two-paragraph README intro + 5 bullet features. No hype. Mention persistence, lineage, and the Ledger.",
  "status": "executed",
  "output_item_id": "it_01JFBND02OUTD00000000000001",
  "executed_at": "2025-12-16T00:01:07.000Z",
  "execution_count": 1,
  "created_by": "user",
  "created_at": "2025-12-16T00:01:05.000Z",
  "updated_at": "2025-12-16T00:01:07.000Z"
}
```

**Output Item (D)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND02OUTD00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "D",
  "title": "README draft",
  "body": "Field-Kit is a persistent Field for building structured knowledge over time. You create Items and Bonds, run operators that generate new artifacts, and inspect an append-only Ledger of events.\n\nThe core loop is simple: write a Bond prompt, run it to create an output Item with lineage, and use Holologue to turn constellations into one specific artifact.\n\nFeatures:\n- Persistent Items, Bonds, Episodes\n- Bonds as prompts + connectors\n- Executed lineage (inputs → bond → output)\n- Holologue many→one artifact generation\n- Append-only QDPIEvent ledger",
  "position": { "x": 1.0, "y": -0.8, "z": 0 },
  "provenance": {
    "created_by": "bond",
    "bond_id": "bd_01JFBND02BOND00000000000001",
    "input_item_ids": ["it_01JFBND02QITEM0000000000001"]
  },
  "created_at": "2025-12-16T00:01:07.000Z",
  "updated_at": "2025-12-16T00:01:07.000Z"
}
```

---

### Example 3 — Binary/Interpretive (link-only) “bridges” (not executed)

**Input Items (Q, Q)**

```json
[
  {
    "schema_version": 1,
    "id": "it_01JFBND03A00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "How do we prove this is not chat?",
    "body": "We need visible persistence, object IDs, and an append-only ledger.",
    "position": { "x": 0, "y": 0.8, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:02:00.000Z",
    "updated_at": "2025-12-16T00:02:00.000Z"
  },
  {
    "schema_version": 1,
    "id": "it_01JFBND03B00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "What should the Ledger show first?",
    "body": "Executed bonds should show inputs → output, plus events with qdpi tags.",
    "position": { "x": 1.2, "y": 0.8, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:02:10.000Z",
    "updated_at": "2025-12-16T00:02:10.000Z"
  }
]
```

**Bond (draft, link-only)**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND03BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": [
    "it_01JFBND03A00000000000000001",
    "it_01JFBND03B00000000000000001"
  ],
  "prompt_text": "Bridge these: define how Ledger UI proves persistence and lineage (inputs → bond → output).",
  "intent_type": "bridges",
  "status": "draft",
  "output_item_id": null,
  "created_by": "user",
  "created_at": "2025-12-16T00:02:20.000Z",
  "updated_at": "2025-12-16T00:02:20.000Z"
}
```

**QDPIEvent — bond drafted (no execution)**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND03EV000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:02:20.050Z",
    "seq": 10,
    "qdpi": "D",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.draft_created",
    "refs": {
      "bond_id": "bd_01JFBND03BOND00000000000001",
      "input_item_ids": [
        "it_01JFBND03A00000000000000001",
        "it_01JFBND03B00000000000000001"
      ],
      "prompt_text": "Bridge these: define how Ledger UI proves persistence and lineage (inputs → bond → output).",
      "origin": "user_written"
    }
  }
]
```

---

### Example 4 — Binary/Interpretive (link-only) “qualifies” (not executed)

**Input Items (Q, M)**

```json
[
  {
    "schema_version": 1,
    "id": "it_01JFBND04A00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "Should we log every UI render event?",
    "body": "It would help debugging, but might flood the ledger.",
    "position": { "x": 0, "y": 0.0, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:03:00.000Z",
    "updated_at": "2025-12-16T00:03:00.000Z"
  },
  {
    "schema_version": 1,
    "id": "it_01JFBND04B00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "M",
    "title": "Event logging rule",
    "body": "Log state-changing operations + key inspections. Render/paint/layout are debug-only (is_debug:true).",
    "position": { "x": 1.2, "y": 0.0, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:03:10.000Z",
    "updated_at": "2025-12-16T00:03:10.000Z"
  }
]
```

**Bond (draft, link-only)**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND04BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": [
    "it_01JFBND04A00000000000000001",
    "it_01JFBND04B00000000000000001"
  ],
  "prompt_text": "Item B qualifies Item A: keep render events debug-only; log only state changes and key inspections in v0.1.",
  "intent_type": "qualifies",
  "status": "draft",
  "output_item_id": null,
  "created_by": "user",
  "created_at": "2025-12-16T00:03:20.000Z",
  "updated_at": "2025-12-16T00:03:20.000Z"
}
```

**QDPIEvent — bond drafted (no execution)**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND04EV000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:03:20.050Z",
    "seq": 11,
    "qdpi": "D",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.draft_created",
    "refs": {
      "bond_id": "bd_01JFBND04BOND00000000000001",
      "input_item_ids": [
        "it_01JFBND04A00000000000000001",
        "it_01JFBND04B00000000000000001"
      ],
      "prompt_text": "Item B qualifies Item A: keep render events debug-only; log only state changes and key inspections in v0.1.",
      "origin": "user_written"
    }
  }
]
```

---

### Example 5 — Holologue run produces one artifact Item (H)

**Selected Items (inputs)**

```json
[
  {
    "schema_version": 1,
    "id": "it_01JFBND05A00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "Bond prompt suggestion quality bar",
    "body": "Prompts must be content-shaped, diverse, and constrained.",
    "position": { "x": 0.0, "y": -0.8, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:04:00.000Z",
    "updated_at": "2025-12-16T00:04:00.000Z"
  },
  {
    "schema_version": 1,
    "id": "it_01JFBND05B00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "Bond lifecycle invariants",
    "body": "draft→executed; executed requires output_item_id; failures stay draft + last_error.",
    "position": { "x": 1.2, "y": -0.8, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:04:10.000Z",
    "updated_at": "2025-12-16T00:04:10.000Z"
  },
  {
    "schema_version": 1,
    "id": "it_01JFBND04B00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "M",
    "title": "Event logging rule",
    "body": "Log state-changing operations + key inspections. Render/paint/layout are debug-only (is_debug:true).",
    "position": { "x": 0.6, "y": -1.6, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:03:10.000Z",
    "updated_at": "2025-12-16T00:03:10.000Z"
  }
]
```

**QDPIEvents — holologue requested and completed**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND05EV000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:04:30.000Z",
    "seq": 12,
    "qdpi": "H",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "holologue.run_requested",
    "refs": {
      "selected_item_ids": [
        "it_01JFBND05A00000000000000001",
        "it_01JFBND05B00000000000000001",
        "it_01JFBND04B00000000000000001"
      ],
      "artifact_kind": "spec_fragment"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND05EV000000000000002",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:04:35.000Z",
    "seq": 13,
    "qdpi": "H",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "holologue.completed",
    "refs": {
      "selected_item_ids": [
        "it_01JFBND05A00000000000000001",
        "it_01JFBND05B00000000000000001",
        "it_01JFBND04B00000000000000001"
      ],
      "output_item_id": "it_01JFBND05OUTH00000000000001",
      "artifact_kind": "spec_fragment"
    }
  }
]
```

**Holologue output Item (H)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND05OUTH00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "H",
  "title": "Bond execution + logging spec fragment",
  "body": "Rules:\n- Proposals are events only; Bonds require user confirmation.\n- Draft: output_item_id=null.\n- Executed: output_item_id!=null; prompt_text + inputs immutable.\n- Log bond.run_requested (Q), bond.executed (M), holologue.completed (H).\n- Render/paint/layout events are debug-only (is_debug:true).",
  "position": { "x": 0.4, "y": -2.4, "z": 0 },
  "provenance": {
    "created_by": "holologue",
    "holologue_event_id": "ev_01JFBND05EV000000000000002",
    "selected_item_ids": [
      "it_01JFBND05A00000000000000001",
      "it_01JFBND05B00000000000000001",
      "it_01JFBND04B00000000000000001"
    ],
    "artifact_kind": "spec_fragment"
  },
  "created_at": "2025-12-16T00:04:35.000Z",
  "updated_at": "2025-12-16T00:04:35.000Z"
}
```

---

### Example 6 — Holologue proposes 4 Bond prompts (events only), user selects one and executes it

**Two Items (Q, Q)**

```json
[
  {
    "schema_version": 1,
    "id": "it_01JFBND06A00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "How should bond labels stay hidden?",
    "body": "Users should see prompt_text first. Labels can exist only in Details.",
    "position": { "x": 0.0, "y": -3.2, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:05:00.000Z",
    "updated_at": "2025-12-16T00:05:00.000Z"
  },
  {
    "schema_version": 1,
    "id": "it_01JFBND06B00000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "scope": "private",
    "type": "Q",
    "title": "How do labels help the system anyway?",
    "body": "They diversify suggestions and help Holologue interpret topology, but must be optional.",
    "position": { "x": 1.2, "y": -3.2, "z": 0 },
    "provenance": { "created_by": "user" },
    "created_at": "2025-12-16T00:05:05.000Z",
    "updated_at": "2025-12-16T00:05:05.000Z"
  }
]
```

**QDPIEvents — holologue run + completed + proposals presented (events only)**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND06EV000000000000001",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:05:10.000Z",
    "seq": 14,
    "qdpi": "H",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "holologue.run_requested",
    "refs": {
      "selected_item_ids": [
        "it_01JFBND06A00000000000000001",
        "it_01JFBND06B00000000000000001"
      ],
      "artifact_kind": "plan"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND06EV000000000000002",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:05:14.000Z",
    "seq": 15,
    "qdpi": "H",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "holologue.completed",
    "refs": {
      "selected_item_ids": [
        "it_01JFBND06A00000000000000001",
        "it_01JFBND06B00000000000000001"
      ],
      "output_item_id": "it_01JFBND06OUTH00000000000001",
      "artifact_kind": "plan"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND06EV000000000000003",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:05:14.050Z",
    "seq": 16,
    "qdpi": "Q",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "bond.proposals.presented",
    "refs": {
      "source": { "kind": "holologue", "output_item_id": "it_01JFBND06OUTH00000000000001" },
      "suggestions": [
        { "prompt_text": "Clarify the UI rule: write 3 non-negotiables for keeping labels secondary to prompt_text.", "intent_type": "clarifies" },
        { "prompt_text": "Expand this plan into a 7-step implementation checklist with acceptance criteria.", "intent_type": "expands" },
        { "prompt_text": "Compare two approaches: infer labels at runtime vs store intent_type on bonds. Recommend one.", "intent_type": "compares" },
        { "prompt_text": "Fork 3 ways to display optional labels in Details without implying users must choose them.", "intent_type": "forks" }
      ]
    }
  }
]
```

**Holologue output Item (H)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND06OUTH00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "H",
  "title": "Plan: keep bond labels optional and secondary",
  "body": "1) Prompt-first UI: show prompt_text as the Bond.\n2) Details panel: show optional label as a subtle chip.\n3) Execution ignores labels.\n4) Suggestions diversify using labels internally.\n5) Log only state changes + key inspections; renders debug-only.",
  "position": { "x": 0.6, "y": -4.2, "z": 0 },
  "provenance": {
    "created_by": "holologue",
    "holologue_event_id": "ev_01JFBND06EV000000000000002",
    "selected_item_ids": [
      "it_01JFBND06A00000000000000001",
      "it_01JFBND06B00000000000000001"
    ],
    "artifact_kind": "plan"
  },
  "created_at": "2025-12-16T00:05:14.000Z",
  "updated_at": "2025-12-16T00:05:14.000Z"
}
```

**Bond (draft) — user selects the “Expand into checklist” proposal**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND06BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": ["it_01JFBND06OUTH00000000000001"],
  "prompt_text": "Expand this plan into a 7-step implementation checklist with acceptance criteria.",
  "intent_type": "expands",
  "status": "draft",
  "output_item_id": null,
  "created_by": "user",
  "created_at": "2025-12-16T00:05:16.000Z",
  "updated_at": "2025-12-16T00:05:16.000Z"
}
```

**QDPIEvents — draft created, run requested, executed**

```json
[
  {
    "schema_version": 1,
    "id": "ev_01JFBND06EV000000000000004",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:05:16.050Z",
    "seq": 17,
    "qdpi": "D",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.draft_created",
    "refs": {
      "bond_id": "bd_01JFBND06BOND00000000000001",
      "input_item_ids": ["it_01JFBND06OUTH00000000000001"],
      "prompt_text": "Expand this plan into a 7-step implementation checklist with acceptance criteria.",
      "origin": "proposed_from_holologue",
      "proposal_event_id": "ev_01JFBND06EV000000000000003"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND06EV000000000000005",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:05:17.000Z",
    "seq": 18,
    "qdpi": "Q",
    "direction": "user→field",
    "actor": { "kind": "user", "id": "local-user", "display": "You" },
    "name": "bond.run_requested",
    "refs": {
      "bond_id": "bd_01JFBND06BOND00000000000001",
      "requested_output_type": "M"
    }
  },
  {
    "schema_version": 1,
    "id": "ev_01JFBND06EV000000000000006",
    "network_id": "nw_01JFBND01NET00000000000001",
    "episode_id": "ep_01JFBND01EP000000000000001",
    "ts": "2025-12-16T00:05:18.000Z",
    "seq": 19,
    "qdpi": "M",
    "direction": "system→field",
    "actor": { "kind": "system", "id": "system", "display": "Field-Kit" },
    "name": "bond.executed",
    "refs": {
      "bond_id": "bd_01JFBND06BOND00000000000001",
      "input_item_ids": ["it_01JFBND06OUTH00000000000001"],
      "output_item_id": "it_01JFBND06OUTM00000000000001",
      "output_item_type": "M",
      "execution_count": 1
    }
  }
]
```

**Bond (executed)**

```json
{
  "schema_version": 1,
  "id": "bd_01JFBND06BOND00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "input_item_ids": ["it_01JFBND06OUTH00000000000001"],
  "prompt_text": "Expand this plan into a 7-step implementation checklist with acceptance criteria.",
  "intent_type": "expands",
  "status": "executed",
  "output_item_id": "it_01JFBND06OUTM00000000000001",
  "executed_at": "2025-12-16T00:05:18.000Z",
  "execution_count": 1,
  "created_by": "user",
  "created_at": "2025-12-16T00:05:16.000Z",
  "updated_at": "2025-12-16T00:05:18.000Z"
}
```

**Output Item (M)**

```json
{
  "schema_version": 1,
  "id": "it_01JFBND06OUTM00000000000001",
  "network_id": "nw_01JFBND01NET00000000000001",
  "episode_id": "ep_01JFBND01EP000000000000001",
  "scope": "private",
  "type": "M",
  "title": "Implementation checklist (7 steps)",
  "body": "1) UI: show prompt_text as Bond title. (AC: no label visible by default)\n2) Details: show optional label chip. (AC: chip hidden unless expanded)\n3) Suggestions: emit 4 content-shaped prompts. (AC: all include Item title noun)\n4) Draft: require user confirmation. (AC: no auto-bonds)\n5) Run: log bond.run_requested (Q). (AC: event has bond_id)\n6) Execute: log bond.executed (M) and create output Item with provenance.\n7) Logging: state changes + key inspections only; render debug-only.",
  "position": { "x": 1.4, "y": -4.2, "z": 0 },
  "provenance": {
    "created_by": "bond",
    "bond_id": "bd_01JFBND06BOND00000000000001",
    "input_item_ids": ["it_01JFBND06OUTH00000000000001"]
  },
  "created_at": "2025-12-16T00:05:18.000Z",
  "updated_at": "2025-12-16T00:05:18.000Z"
}
```

## 12) Anti-patterns & Drift Guards

Use these guards to prevent the Bond concept from drifting into “chat” or “types-first” UX.

* **Do not reduce Bonds to labels.**
  Labels (`intent_type`) are optional hints; the Bond is `prompt_text`.

* **Do not require a type/label to execute.**
  A Bond must run with `intent_type` unset/null.

* **Do not auto-create Bonds silently.**
  Suggestions/Proposals become Bonds only on user confirmation.

* **Do not log every UI render as an event.**
  In v0.1, log state changes + key inspections. UI/render events (if captured at all) are debug-only (`is_debug:true`) and may use `direction:"field→user"`; they are not normative v0.1 ledger integrity events.

* **Do not let generic prompts replace content-shaped suggestions.**
  Suggestions must embed Item nouns/phrases and request concrete outputs with constraints.

Additional drift guards:

* **Do not mutate executed Bonds’ inputs or `prompt_text`.** Preserve history via outputs and events.
* **Do not treat Holologue as summary-by-default.** Holologue output must be a specific artifact (plan, checklist, spec fragment, etc.).
* **Do not delete prior outputs on re-exec.** Keep provenance and history; only point `output_item_id` to the latest.
* **Do not conflate Credits with Bonds.** Credits are event-derived bookkeeping; Bonds remain prompts + connectors.

## 13) Definition of Done (v0.1)

* [ ] Bond object matches “Core Data Objects v0.1” fields: `input_item_ids`, `prompt_text`, `status`, `output_item_id`, `last_error`, execution metadata.
* [ ] User confirmation is required to create a Bond draft (including from suggestions).
* [ ] System can propose **exactly 4** content-shaped Bond prompts on Item create/selection.
* [ ] Suggestions/Proposals are stored as **QDPIEvents only** (`bond.suggestions.presented` / `bond.proposals.presented`), not as Bonds.
* [ ] Bond execution:

  * [ ] Appends `bond.run_requested` (QDPI `Q`, `direction:"user→field"`)
  * [ ] On success: creates exactly one output Item with provenance; updates Bond to executed; appends `bond.executed` (QDPI `M`, `direction:"system→field"`)
  * [ ] On failure: Bond remains draft; sets `last_error`; appends `bond.execution_failed` (QDPI `M`, `direction:"system→field"`)
* [ ] Executed Bonds are immutable in `input_item_ids` and `prompt_text`.
* [ ] Re-execution (if enabled) updates only `output_item_id` and execution metadata; prior outputs remain stored.
* [ ] Binary link-only Bonds are supported: draft-only, `output_item_id:null`, no output Item, still useful topology.
* [ ] Holologue produces one specific artifact Item (`type:"H"`) and may propose Bond prompts (events only).
* [ ] Event logging rule enforced: state changes + key inspections logged; UI/render debug-only.

## 14) Open Questions

1. Should we ever introduce `BondStatus:"failed"` later, or keep the v0.1 model (draft + last_error) permanently?
2. Should binary Bonds ever support “link+generate” in v0.2, and if so, what UI makes that explicit without turning Bonds into “types-first”?
3. Should `intent_type` be stored on the Bond when inferred, or inferred at runtime only (and stored only on suggestion events)?
4. If suggestions are events-only, how long should the UI retain them (session-only vs cached), and what is the minimal cache that doesn’t become a new object type?
5. Should Holologue proposals always be exactly 4 prompts (like Item suggestions), or can it vary by constellation size?
6. When a Bond is re-executed, should `output_item_id` always point to the latest output, or should we discourage re-exec and encourage “fork a new Bond”?
7. Should we standardize a small set of output formatting constraints (e.g., “checklist”, “plan”, “spec fragment”) for Bonds as optional UI helpers, or keep all formatting in `prompt_text` only?
8. What minimal analytics do we want from suggestion events without logging user-sensitive content (privacy)?
9. How should Holologue consume link-only Bonds: treat `prompt_text` as semantic edges, or only as structural adjacency unless executed?